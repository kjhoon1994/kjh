<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>쌍용교육센터</title>

<style>
table {
	border-collapse: collapse;
	width: 100%;
}
th, td {
	text-align: left;
	padding: 8px;
}
tr:nth-child(odd) {
	background-color: #f2f2f2;
}
th {
	background-color: #4CAF50;
	color: white;
}
</style>

<script>
	var members = [];
	window.addEventListener("load", function() {
		init();
		list();
		document.getElementById("btn").addEventListener("click", function() {
			add();
			list();
		});
	});
	function init() {
		members.push({
			mid : "M01",
			name : "HONG",
			phone : "010-1234-1234",
			email : "hong@test.com",
			toString : function() {
			}
		});
		members.push({
			mid : "M02",
			name : "PARK",
			phone : "010-1234-4321",
			email : "park@naver.com",
			toString : function() {
			}
		});
		members.push({
			mid : "M03",
			name : "CHOI",
			phone : "010-5678-7890",
			email : "choi@naver.com",
			toString : function() {
			}
		});
		members.push({
			mid : "M04",
			name : "KIM",
			phone : "010-4321-9876",
			email : "kim@sist.com",
			toString : function() {
			}
		});
	}
	function list() {
		//console.log(members);
		var txt = "";
		txt += "<h1>Member List</h1>";
		txt += "<table>";
		txt += "<tr><th>번호</th><th>이름</th><th>전화번호</th><th>이메일</th><th></th><th></th></tr>";
		for ( var a in members) {
			var member = members[a];
			txt += "<tr>";
			txt += "<td>" + member.mid + "</td>";
			txt += "<td>" + member.name + "</td>";
			txt += "<td>" + member.phone + "</td>";
			txt += "<td>" + member.email + "</td>";
			txt += "<td><button class='btnUpdate'>update</button></td>";
			txt += "<td><button class='btnDelete'>delete</button></td>";
			txt += "</tr>";
		}
		txt += "</table>";
		if (members.length == 0)
			txt += "<p>출력할 정보가 없습니다</p>";
		if (members.length > 0)
			txt += "<p>총 " + members.length + "명</p>";
		document.getElementById("demo").innerHTML = txt;
		var delButtons = document.getElementsByClassName("btnDelete");
        for(var a in delButtons) {
        	delButtons[a].onclick = function(){
                remove(this);
            }
        }
		
	}
	function add() {
		var mid = document.getElementById("mid");
		var name = document.getElementById("name");
		var phone = document.getElementById("phone");
		var email = document.getElementById("email");
		members.push({
			mid : mid.value,
			name : name.value,
			phone : phone.value,
			email : email.value,
			toString : function() {
			}
		});
		mid.value = "";
		name.value = "";
		phone.value = "";
		email.value = "";
	}
	
	function remove(btn) {
		var mid = btn.parentNode.parentNode.childNodes[0].innerText;
		var name = btn.parentNode.parentNode.childNodes[1].innerText;
		if(confirm("현재 선택한 자료("+ mid + "/" + name + ")를 삭제할까요?")){
            
            for(var i = 0; i < members.length; ++i){
            	var member = members[i];
                if(member.mid == mid){
                    members.splice(i, 1);
                    break;
                }
            }
    		list();
        }
	}
</script>

</head>
<body>


	<h1>Javascript</h1>
	<div id="">
		Mid <input type="text" id="mid"> Name <input type="text"
			id="name"> Phone <input type="text" id="phone"> Email
		<input type="text" id="email">
		<button id="btn" value="add">Member Add</button>
	</div>
	<div id="demo">결과보기</div>

</body>
</html>